server {
    listen 80;
    server_name gehaowu.com www.gehaowu.com;
    #return 301 https://gehaowu.com$request_uri? permanent;
    rewrite ^/(.*) https://www.gehaowu.com/$1 permanent;
}
server {
    listen 443 ssl;
    ssl_certificate keys/www.gehaowu.com.crt;
    ssl_certificate_key keys/www.gehaowu.com.key;
    server_name gehaowu.com;
    rewrite ^/(.*) https://www.gehaowu.com/$1 permanent;
}
server {
    listen 443 ssl;
    ssl_certificate  keys/www.gehaowu.com.crt;
    ssl_certificate_key  keys/www.gehaowu.com.key;
    server_name www.gehaowu.com;
    index index.html index.htm default.html;
    root        /home/wwwroot/www.gehaowu.com;
    access_log  /tmp/gehaowu.com.access.log;
    error_log   /tmp/gehaowu.com.error.log;

# 静止访问 "." 开头的隐藏文件
    location ~ /\. {
        deny  all;
    }
# robots.txt 与 favicon.ico 文件访问不记录日志
    location ~* ^/(favicon.ico|robots.txt)$ {
        allow all;
        access_log off;
        log_not_found off;
    }
# 静态文件超期
    location ~* \.(html|htm|css|xml|rss|gif|jpeg|jpg|js|atom|txt|png|ico|bmp|svg|doc|pdf|xhtml|mp3|ogg|mp4|mpeg|webm|)$ {
    expires max;
    #expires off;
    #log_not_found off;
    }
}
#server {
#listen 443 ssl;
#ssl_certificate  keys/www.gehaowu.com.crt;
#ssl_certificate_key  keys/www.gehaowu.com.key;
#server_name www.gehaowu.com;
#location / {
#    slowfs_cache        ghwhomecache;
#    slowfs_cache_key    $uri;
#    slowfs_cache_valid  1d;
#}
#location ~ /purge(/.*) {
#auth_basic "Restricted";
#auth_basic_user_file keys/passwd.db;
#allow				all;
#slowfs_cache_purge	ghwhomecache $1;
#}
#}
